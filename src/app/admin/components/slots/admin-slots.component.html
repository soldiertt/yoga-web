<mat-toolbar color="accent">
  <h1>Liste des cours plannifiés</h1>
  <span class="expand"></span>
  <button mat-fab (click)="createDialog()">
    <mat-icon>add_circle</mat-icon>
  </button>
</mat-toolbar>
<main>
  <mat-accordion class="expansion-admin-list">
    <mat-expansion-panel *ngFor="let slot of slots$ | async | sortSlots" (afterExpand)="loadParticipants(slot.id)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{slot.courseDate | date}} - {{slot.courseTime}}
        </mat-panel-title>
        <mat-panel-description>
          {{slot.participantsCount}} participant(s)
          <div>
            <button mat-icon-button color="primary" (click)="deleteDialog(slot.id, $event)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <mat-list *ngIf="slot.participantsCount! > 0; else noParticipant" class="participant-list">
        <mat-list-item *ngFor="let participant of slotParticipants$ | async">
          <mat-icon matListItemIcon>person</mat-icon>
          <div matListItemTitle>{{participant.owner?.firstName}} {{participant.owner?.lastName}}</div>
          <div matListItemLine>
            <span>Tél. : {{participant.owner?.phone}}</span>
            <span>Email : {{ participant.owner?.email}}</span>
            <span class="card-ref">{{participant.id | cardId}}</span>
          </div>
        </mat-list-item>
      </mat-list>
      <ng-template #noParticipant>
        <i>Aucun participant pour le moment</i>
      </ng-template>
    </mat-expansion-panel>
  </mat-accordion>
</main>
